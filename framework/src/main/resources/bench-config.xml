<bench-config>

   <master bind="${bind.address}" slavesCount="8"/>

   <scaling-benchmark initSize="2" maxSize="8" increment="2" name="JBC_async-repl">
      <benchmark-stages>
         <stage name="StartClusterStage">
            <property name="chacheWrapperClass" value="org.cachebench.cachewrappers.JBossCache3Wrapper"/>
            <property name="config" value="mvcc/mvcc-repl-async.xml" mapAggregator="wrapperStartupParams"/>
         </stage>
         <stage name="ClusterValidationStage">
            <property name="PartialReplication" value="false"/>
         </stage>
         <stage name="WarmupStage">
            <property name="OperationCount" value="10000"/>
         </stage>
         <stage name="WebSessionBenchmarkStage">
            <property name="numberOfRequests" value="500000"/>
         </stage>
         <stage name="CsvReportGenerationStage"/>
         <stage name="BenchmarkCleanupStage"/>
      </benchmark-stages>
      <after>   
         <stage name="GenerateChartStage">
            <property name="fnPrefix" value="JBC_async-repl"/>
         </stage>
      </after>
   </scaling-benchmark>

   <scaling-benchmark initSize="2" maxSize="8" increment="2" name="JBC_sync-repl">
      <benchmark-stages>
         <stage name="StartClusterStage">
            <property name="chacheWrapperClass" value="org.cachebench.cachewrappers.JBossCache3Wrapper"/>
            <property name="config" value="mvcc/mvcc-repl-sync.xml" mapAggregator="wrapperStartupParams"/>
         </stage>
         <stage name="ClusterValidationStage">
            <property name="PartialReplication" value="false"/>
         </stage>
         <stage name="WarmupStage">
            <property name="OperationCount" value="10000"/>
         </stage>
         <stage name="WebSessionBenchmarkStage">
            <property name="numberOfRequests" value="500000"/>
         </stage>
         <stage name="CsvReportGenerationStage"/>
         <stage name="BenchmarkCleanupStage"/>
      </benchmark-stages>
      <after>
         <stage name="GenerateChartStage">
            <property name="fnPrefix" value="JBC_sync-repl"/>
         </stage>
      </after>
   </scaling-benchmark>

   <scaling-benchmark initSize="2" maxSize="8" increment="2" name="infinispan_sync-repl">
      <benchmark-stages>
         <stage name="StartClusterStage">
            <property name="chacheWrapperClass" value="org.cachebench.cachewrappers.InfinispanWrapper"/>
            <property name="config" value="repl-sync.xml" mapAggregator="wrapperStartupParams"/>
         </stage>
         <stage name="ClusterValidationStage">
            <property name="PartialReplication" value="false"/>
         </stage>
         <stage name="WarmupStage">
            <property name="OperationCount" value="10000"/>
         </stage>

         <stage name="WebSessionBenchmarkStage">
            <property name="numberOfRequests" value="500000"/>
         </stage>
         <stage name="CsvReportGenerationStage"/>
         <stage name="BenchmarkCleanupStage"/>
      </benchmark-stages>
      <after>
         <stage name="GenerateChartStage">
            <property name="fnPrefix" value="infinispan_sync-repl"/>
         </stage>
      </after>
   </scaling-benchmark>

   <scaling-benchmark initSize="2" maxSize="8" increment="2" name="infinispan_async-repl">
      <benchmark-stages>
         <stage name="StartClusterStage">
            <property name="chacheWrapperClass" value="org.cachebench.cachewrappers.InfinispanWrapper"/>
            <property name="config" value="repl-async.xml" mapAggregator="wrapperStartupParams"/>
         </stage>
         <stage name="ClusterValidationStage">
            <property name="PartialReplication" value="false"/>
         </stage>
         <stage name="WarmupStage">
            <property name="OperationCount" value="10000"/>
         </stage>

         <stage name="WebSessionBenchmarkStage">
            <property name="numberOfRequests" value="500000"/>
         </stage>
         <stage name="CsvReportGenerationStage"/>
         <stage name="BenchmarkCleanupStage"/>
      </benchmark-stages>
      <after>
         <stage name="GenerateChartStage">
            <property name="fnPrefix" value="infinispan_async-repl"/>
         </stage>
      </after>
   </scaling-benchmark>

   <scaling-benchmark initSize="2" maxSize="8" increment="2" name="infinispan_async-dist">
      <benchmark-stages>
         <stage name="StartClusterStage">
            <property name="chacheWrapperClass" value="org.cachebench.cachewrappers.InfinispanWrapper"/>
            <property name="config" value="dist-async.xml" mapAggregator="wrapperStartupParams"/>
         </stage>
         <stage name="ClusterValidationStage">
            <property name="PartialReplication" value="false"/>
         </stage>
         <stage name="WarmupStage">
            <property name="OperationCount" value="10000"/>
         </stage>

         <stage name="WebSessionBenchmarkStage">
            <property name="numberOfRequests" value="500000"/>
         </stage>
         <stage name="CsvReportGenerationStage"/>
         <stage name="BenchmarkCleanupStage"/>
      </benchmark-stages>
      <after>
         <stage name="GenerateChartStage">
            <property name="fnPrefix" value="infinispan_async-dist"/>
         </stage>
      </after>
   </scaling-benchmark>
   
   <scaling-benchmark initSize="2" maxSize="8" increment="2" name="infinispan_sync-dist">
      <benchmark-stages>
         <stage name="StartClusterStage">
            <property name="chacheWrapperClass" value="org.cachebench.cachewrappers.InfinispanWrapper"/>
            <property name="config" value="dist-sync.xml" mapAggregator="wrapperStartupParams"/>
         </stage>
         <stage name="ClusterValidationStage">
            <property name="PartialReplication" value="false"/>
         </stage>
         <stage name="WarmupStage">
            <property name="OperationCount" value="10000"/>
         </stage>

         <stage name="WebSessionBenchmarkStage">
            <property name="numberOfRequests" value="500000"/>
         </stage>
         <stage name="CsvReportGenerationStage"/>
         <stage name="BenchmarkCleanupStage"/>
      </benchmark-stages>
      <after>
         <stage name="GenerateChartStage">
            <property name="fnPrefix" value="infinispan_sync-dist"/>
         </stage>
      </after>
   </scaling-benchmark>

   <scaling-benchmark initSize="2" maxSize="8" increment="2" name="infinispan_async-dist-l1">
      <benchmark-stages>
         <stage name="StartClusterStage">
            <property name="chacheWrapperClass" value="org.cachebench.cachewrappers.InfinispanWrapper"/>
            <property name="config" value="dist-async-l1.xml" mapAggregator="wrapperStartupParams"/>
         </stage>
         <stage name="ClusterValidationStage">
            <property name="PartialReplication" value="false"/>
         </stage>
         <stage name="WarmupStage">
            <property name="OperationCount" value="10000"/>
         </stage>

         <stage name="WebSessionBenchmarkStage">
            <property name="numberOfRequests" value="500000"/>
         </stage>
         <stage name="CsvReportGenerationStage"/>
         <stage name="BenchmarkCleanupStage"/>
      </benchmark-stages>
      <after>
         <stage name="GenerateChartStage">
            <property name="fnPrefix" value="infinispan_async-dist-l1"/>
         </stage>
      </after>
   </scaling-benchmark>

   <scaling-benchmark initSize="2" maxSize="8" increment="2" name="infinispan_sync-dist-l1">
      <benchmark-stages>
         <stage name="StartClusterStage">
            <property name="chacheWrapperClass" value="org.cachebench.cachewrappers.InfinispanWrapper"/>
            <property name="config" value="dist-sync-l1.xml" mapAggregator="wrapperStartupParams"/>
         </stage>
         <stage name="ClusterValidationStage">
            <property name="PartialReplication" value="false"/>
         </stage>
         <stage name="WarmupStage">
            <property name="OperationCount" value="10000"/>
         </stage>

         <stage name="WebSessionBenchmarkStage">
            <property name="numberOfRequests" value="500000"/>
         </stage>
         <stage name="CsvReportGenerationStage"/>
         <stage name="BenchmarkCleanupStage"/>
      </benchmark-stages>
      <after>
         <stage name="GenerateChartStage">
            <property name="fnPrefix" value="infinispan_sync-dist-l1"/>
         </stage>
      </after>
   </scaling-benchmark>

   <!--<fixed-size-benchmark size="2" name="infinispan_dist-async">-->
      <!--<stage name="StartClusterStage" enabled="true">-->
         <!--<property name="chacheWrapperClass" value="org.cachebench.cachewrappers.InfinispanWrapper"/>-->
         <!--<property name="config" value="dist-async.xml" mapAggregator="wrapperStartupParams"/>-->
      <!--</stage>-->
      <!--<stage name="ClusterValidationStage">-->
         <!--<property name="PartialReplication" value="true"/>-->
      <!--</stage>-->
      <!--<stage name="WarmupStage">-->
         <!--<property name="OperationCount" value="20"/>-->
      <!--</stage>-->
      <!--<stage name="WebSessionBenchmarkStage">-->
         <!--<property name="numberOfRequests" value="1000"/>-->
      <!--</stage>-->
      <!--<stage name="CsvReportGenerationStage"/>-->
      <!--<stage name="BenchmarkCleanupStage"/>-->
   <!--</fixed-size-benchmark>-->

</bench-config>